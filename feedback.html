<!DOCTYPE html>
<html lang="en">

<head>
    
</head>

<body>
    <h2>Feedback Pagina</h2>

    <button onclick="letsgo()">Klik Hier</button>
    <button onclick="FetchTable()">Refresh Table</button>

    <div id="dediv">...</div>

    <table id="feedbackTable" class="feedbacktable">

        <tr id="feedbackTableRow"></tr>
    </table>

</body>

<script>
    function letsgo() {
        fetch("http://localhost:8080/feedback/all")
            .then(r => r.json())
            .then(d => verwerkgegevens(d))
    }

    function verwerkgegevens(data) {
        console.log(data)
        // For fetching an array of entities
        for (var i = 0; i < data.length; i++) {
            document.getElementById("dediv").innerHTML += `<h1>${data[i].mening}</h1>`
        }

        // For fetching a single entity
        //document.getElementById("dediv").innerHTML += `<h1>${data.mening}</h1>)`
    }

    function saveFeedback() {
        fetch("http://localhost:8080/feedback/save")
            .then(r => r.json())
            .then(d => saveFeedbackFront(d))
    }

    function saveFeedbackFront(d) {

    }

    function FetchTable() {
        fetch("http://localhost:8080/feedback/all")
            .then(r => r.json())
            .then(d => RefreshFeedbackTable(d))
    }

    function RefreshFeedbackTable(data) {
        document.getElementById("feedbackTable").innerHTML =
            `<tr>
                    <th><strong>Persoon ID</strong></th>
                    <th><strong>Cv ID</strong></th>
                    <th><strong>Aangenomen</strong></th>
                    <th><strong>Feedback</strong></th>
            </tr>`

        //console.log("TEST: ---Data: " + data);

        for (var i = 0; i < data.length; i++) {
            document.getElementById("feedbackTable").innerHTML +=
                `<tr>
                    <td>${data[i].persoon_nr}</td>
                    <td>${data[i].cv_nr}</td>
                    <td>${data[i].aangenomen}</td>
                    <td>${data[i].mening}</td>
                </tr>`

            console.log("TEST: PersoonNr: " + data[i].persoon_nr + "| CvNr: " + data[i].cv_nr + "| Add to table aangenomen: " + data[i].aangenomen + "| Add to table mening: " + data[i].mening);
        }

    }

    function AddTableRow(data) {

        //`

        //<tr>
        //    <td>Alfreds Futterkiste</td>
        //    <td>Maria Anders</td>
        //    <td>Germany</td>
        //</tr>
        //<tr>
        //    <td>Centro comercial Moctezuma</td>
        //    <td>Francisco Chang</td>
        //    <td>Mexico</td>
        //</tr>
        //`
    }
</script>

<style>

    .feedbacktable, th, td {
        border: 1px solid black;
        border-collapse: collapse;
        padding: 10px;
    }

</style>

</html>